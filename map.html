<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema#">
<head>
<meta charset="utf-8">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<style>
	#map {
		text-align: center;
	}
</style>
</head>
<body>

<div id="map">
	<object id="svgObject" data="map4.svg" type="image/svg+xml" height="600px">
	Your browser doesn't support SVG
	</object>
</div>

</body>
<script>
	$ = jQuery;

	var getUrlParameter = function getUrlParameter(sParam) {
	    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
	        sURLVariables = sPageURL.split('&'),
	        sParameterName,
	        i;

	    for (i = 0; i < sURLVariables.length; i++) {
	        sParameterName = sURLVariables[i].split('=');

	        if (sParameterName[0] === sParam) {
	            return sParameterName[1] === undefined ? true : sParameterName[1];
	        }
	    }
	};


    window.onload=function() {

		// Get the Object by ID
		var a = document.getElementById("svgObject");
		// Get the SVG document inside the Object tag
		var svgDoc = a.contentDocument;
		// Get one of the SVG items by ID;
		//var svgItem = svgDoc.getElementById("svgItem");
		var svgItem = $(svgDoc).find('svg').find('g');
		//console.log(svgItem);
		// Set the colour to something else
		//svgItem.setAttribute("fill", "lime");
		var lineTo = {};
		lineTo['lineToBar'] = $(svgItem[0]).find('polyline');
		lineTo['lineToLumpini'] = $(svgItem[1]);
		lineTo['lineToCrowne_5'] = $(svgItem[2]);
		lineTo['lineToCrowne_4'] = $(svgItem[3]);
		lineTo['lineToCrowne_3'] = $(svgItem[4]);
		lineTo['lineToCrowne_2'] = $(svgItem[5]);
		lineTo['lineToCrowne_1'] = $(svgItem[6]);
		lineTo['lineToSaladaeng'] = $(svgItem[9]);
		lineTo['lineToSilom'] = $(svgItem[10]).find('polyline');
		lineTo['lineToSathorn'] = $(svgItem[11]);

		var hideAllLine = function (lineTo) {
			// Hide all navigator
			$.each(lineTo, function(index, value) {
				value.hide();
			});
		}

		hideAllLine(lineTo);

		var roomsTmp = $(svgItem[0]).find('rect');
		var roomsTmp2 = $(svgItem[0]).find('polygon');
		var rooms = {};
		rooms['Silom'] = roomsTmp[0];
		rooms['Saladaeng'] = roomsTmp[1];
		rooms['Sathorn'] = roomsTmp[2];
		rooms['Crowne_1'] = roomsTmp[3];
		rooms['Crowne_2'] = roomsTmp[4];
		rooms['Crowne_3'] = roomsTmp[5];
		rooms['Crowne_4'] = roomsTmp[6];
		rooms['Crowne_5'] = roomsTmp[7];
		rooms['Lumpini'] = roomsTmp2[1];
		rooms['Bar'] = roomsTmp2[2];
		
		// Bind rooms click for show line		
		$.each(rooms, function(index, value) {
			$(rooms[index]).click(function () {
				hideAllLine(lineTo);
				lineTo['lineTo'+index].fadeIn(1000);
			});
		});


		// Trigger map click
		var roomTrigger = getUrlParameter('room');
		if (typeof roomTrigger !== "undefined") {
			hideAllLine(lineTo);
			lineTo['lineTo'+roomTrigger].fadeIn(1000);
		}

	};



</script>
</html>